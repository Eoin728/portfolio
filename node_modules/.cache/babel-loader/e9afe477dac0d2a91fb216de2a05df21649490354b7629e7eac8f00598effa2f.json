{"ast":null,"code":"function _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { setFocusWithoutScroll } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { CheckBox } from '../CheckBox';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { SelectionSummary } from './SelectionSummary';\nimport { StyledContainer, OptionsContainer, SelectOption } from '../Select/StyledSelect';\nimport { applyKey, getOptionLabel, getOptionValue, useDisabled, getOptionIndex, arrayIncludes } from '../Select/utils';\nimport { EmptySearchOption } from '../Select/EmptySearchOption';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar SelectMultipleContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _optionsRef$current;\n  var allOptions = _ref.allOptions,\n    _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    disabledProp = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropHeight = _ref.dropHeight,\n    _ref$emptySearchMessa = _ref.emptySearchMessage,\n    emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n    help = _ref.help,\n    icon = _ref.icon,\n    id = _ref.id,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    messages = _ref.messages,\n    onChange = _ref.onChange,\n    onClose = _ref.onClose,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    optionIndexesInValue = _ref.optionIndexesInValue,\n    options = _ref.options,\n    _ref$replace = _ref.replace,\n    replace = _ref$replace === void 0 ? true : _ref$replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    search = _ref.search,\n    setSearch = _ref.setSearch,\n    usingKeyboard = _ref.usingKeyboard,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? [] : _ref$value,\n    valueKey = _ref.valueKey,\n    showSelectedInline = _ref.showSelectedInline;\n  var theme = useThemeValue();\n  var _useState = useState(-1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var _useState3 = useState(disabledProp),\n    disabled = _useState3[0],\n    setDisabled = _useState3[1];\n  var activeRef = useRef();\n  var _useState4 = useState(),\n    showA11yLimit = _useState4[0],\n    setShowA11yLimit = _useState4[1];\n  var clearRef = useRef();\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus) {\n        setFocusWithoutScroll(clearButton);\n      } else if (searchRef && searchRef.current) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsRef.current) {\n        setActiveIndex(0);\n      }\n    }, 100); // Drop should be open after 100ms\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n    if (optionsNode != null && optionsNode.children) {\n      var optionNode = optionsNode.children[activeIndex];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    var optionVal = getOptionValue(index, options, valueKey || labelKey);\n    if (value) {\n      if (value.length === 0) {\n        result = false;\n      } else if (typeof value[0] !== 'object') {\n        result = value.indexOf(optionVal) !== -1;\n      } else if (valueKey) {\n        result = value.some(function (valueItem) {\n          var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n          return valueValue === optionVal;\n        });\n      }\n    }\n    return result;\n  }, [value, valueKey, options, labelKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n        var allOptionsIndex = getOptionIndex(allOptions, options[index], valueKey || labelKey);\n        var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n        if (valueIndex === -1 && (!limit || (value == null ? void 0 : value.length) < limit)) {\n          nextOptionIndexesInValue.push(allOptionsIndex);\n        } else {\n          nextOptionIndexesInValue.splice(valueIndex, 1);\n        }\n        var nextValue = nextOptionIndexesInValue.map(function (i) {\n          return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n        });\n        var nextSelected = nextOptionIndexesInValue;\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [labelKey, limit, onChange, optionIndexesInValue, options, allOptions, valueKey, value]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    if (nextActiveIndex !== (options == null ? void 0 : options.length)) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase();\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (!isDisabled(activeIndex) && activeIndex >= 0 && activeIndex < (options == null ? void 0 : options.length)) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, isDisabled]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n\n  // handle when limit is reached\n  useEffect(function () {\n    var originallyDisabled = function originallyDisabled(index) {\n      var option = allOptions[index];\n      var result;\n      if (disabledKey) {\n        result = applyKey(option, disabledKey);\n      } else if (Array.isArray(disabledProp)) {\n        if (typeof disabledProp[0] === 'number') {\n          result = disabledProp.indexOf(index) !== -1;\n        } else {\n          result = getOptionIndex(disabledProp, getOptionValue(index, options, valueKey || labelKey), valueKey || labelKey) !== -1;\n        }\n      }\n      return result;\n    };\n    if (value && limit) {\n      if (value.length === limit) {\n        var newDisabled = [].concat(disabledProp);\n        // disable everything that is not selected\n        for (var i = 0; i < (options == null ? void 0 : options.length); i += 1) {\n          if (!isSelected(i) && !originallyDisabled(i)) {\n            newDisabled.push(options[i]);\n          }\n        }\n        if (usingKeyboard) setShowA11yLimit('Selected. Maximum selection limit reached.');\n        setDisabled(newDisabled);\n      } else {\n        if (usingKeyboard) setShowA11yLimit(undefined);\n        setDisabled(disabledProp);\n      }\n    }\n  }, [isSelected, value, limit, disabledProp, allOptions, disabledKey, labelKey, options, usingKeyboard, valueKey]);\n\n  // reset showA11yLimit after announcement is read\n  useEffect(function () {\n    if (showA11yLimit !== undefined) {\n      setTimeout(function () {\n        setShowA11yLimit(undefined);\n      }, 2000); // value chosen based on length of a11yLimit message\n    }\n  }, [showA11yLimit]);\n  var summaryContent = /*#__PURE__*/React.createElement(SelectionSummary, {\n    allOptions: allOptions,\n    clearRef: clearRef,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    isSelected: isSelected,\n    labelKey: labelKey,\n    limit: limit,\n    messages: messages,\n    onChange: onChange,\n    onMore: onMore,\n    options: options,\n    search: search,\n    setActiveIndex: setActiveIndex,\n    showSelectedInline: showSelectedInline,\n    value: value,\n    valueKey: valueKey\n  });\n  var helpContent;\n  if (help) {\n    if (typeof help === 'string') helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      pad: \"xsmall\"\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, help));else helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, help);\n  }\n  if (showSelectedInline) summaryContent = /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    justify: \"between\",\n    flex: false\n  }, summaryContent, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Button, {\n    fill: \"vertical\",\n    onClick: onClose,\n    a11yTitle: \"Close Select\"\n  }, icon)));\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption,\n    onEsc: onClose\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight,\n    a11yTitle: format({\n      id: 'selectMultiple.selectDrop',\n      messages: messages\n    })\n  }, summaryContent, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter(event) {\n      onNextOption(event);\n    }\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    a11yTitle: format({\n      id: 'selectMultiple.search',\n      messages: messages\n    }),\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  }))), helpContent, (options == null ? void 0 : options.length) > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"0\",\n    ref: optionsRef,\n    \"aria-multiselectable\": true,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    },\n    \"aria-activedescendant\": optionsRef == null || (_optionsRef$current = optionsRef.current) == null ? void 0 : _optionsRef$current.children[activeIndex]\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = value ? arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey) : false;\n    var optionActive = activeIndex === index;\n    var optionLabel = getOptionLabel(index, options, labelKey || valueKey);\n\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else {\n      child = /*#__PURE__*/React.createElement(CheckBox, {\n        label: /*#__PURE__*/React.createElement(Box, {\n          alignSelf: \"center\",\n          width: \"100%\",\n          align: \"start\"\n        }, optionLabel),\n        pad: \"xsmall\",\n        tabIndex: \"-1\",\n        checked: optionSelected,\n        disabled: optionDisabled\n      });\n    }\n    if (!children && search) {\n      var searchText = search.toLowerCase();\n      if (typeof optionLabel === 'string' && optionLabel.toLowerCase().indexOf(searchText) >= 0) {\n        // code to bold search term in matching options\n        var boldIndex = optionLabel.toLowerCase().indexOf(searchText);\n        var childBeginning = optionLabel.substring(0, boldIndex);\n        var childBold = optionLabel.substring(boldIndex, boldIndex + searchText.length);\n        childBold = /*#__PURE__*/React.createElement(\"b\", null, childBold);\n        var childEnd = optionLabel.substring(boldIndex + searchText.length);\n        child = /*#__PURE__*/React.createElement(CheckBox, {\n          label: /*#__PURE__*/React.createElement(Box, {\n            alignSelf: \"center\",\n            width: \"100%\",\n            align: \"start\",\n            direction: \"row\"\n          }, /*#__PURE__*/React.createElement(Text, null, childBeginning, childBold, childEnd)),\n          pad: \"xsmall\",\n          tabIndex: \"-1\",\n          checked: optionSelected,\n          disabled: optionDisabled\n        });\n      }\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption, {\n      a11yTitle: format({\n        id: optionSelected ? 'selectMultiple.optionSelected' : 'selectMultiple.optionNotSelected',\n        messages: messages,\n        values: {\n          optionLabel: optionLabel\n        }\n      })\n      // eslint-disable-next-line react/no-array-index-key\n      ,\n\n      key: index\n      // merge optionRef and activeRef\n      ,\n\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      id: \"option\" + index,\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), usingKeyboard && showA11yLimit && /*#__PURE__*/React.createElement(Box, {\n    height: \"0px\",\n    width: \"0px\",\n    overflow: \"hidden\"\n    // announce when we reach the limit of items\n    // that can be selected\n    ,\n\n    \"aria-live\": \"assertive\",\n    role: \"alert\"\n  }, showA11yLimit)));\n});\nexport { SelectMultipleContainer };","map":{"version":3,"names":["_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","React","forwardRef","useCallback","useContext","useEffect","useRef","useState","setFocusWithoutScroll","Box","Button","CheckBox","InfiniteScroll","Keyboard","Text","TextInput","SelectionSummary","StyledContainer","OptionsContainer","SelectOption","applyKey","getOptionLabel","getOptionValue","useDisabled","getOptionIndex","arrayIncludes","EmptySearchOption","MessageContext","useThemeValue","SelectMultipleContainer","_ref","ref","_optionsRef$current","allOptions","_ref$children","children","disabledProp","disabled","disabledKey","dropHeight","_ref$emptySearchMessa","emptySearchMessage","help","icon","id","labelKey","limit","messages","onChange","onClose","onKeyDown","onMore","onSearch","optionIndexesInValue","options","_ref$replace","replace","searchPlaceholder","search","setSearch","usingKeyboard","_ref$value","value","valueKey","showSelectedInline","theme","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","_useContext","format","searchRef","optionsRef","_useState3","setDisabled","activeRef","_useState4","showA11yLimit","setShowA11yLimit","clearRef","isDisabled","_activeRef$current","current","focus","timer","setTimeout","clearButton","searchInput","clearTimeout","optionsNode","optionNode","isSelected","index","result","optionVal","indexOf","some","valueItem","valueValue","selectOption","event","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","nextValue","map","i","reduce","nextSelected","option","selected","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","label","charAt","toLowerCase","key","onActiveOption","onSelectOption","customSearchInput","select","SelectTextInput","selectOptionsStyle","box","container","originallyDisabled","Array","isArray","newDisabled","concat","undefined","summaryContent","createElement","helpContent","flex","pad","size","direction","justify","fill","onClick","a11yTitle","onEnter","onSpace","onUp","onDown","onEsc","focusIndicator","type","placeholder","nextSearch","target","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","optionLabel","child","textComponent","active","props","alignSelf","width","align","checked","searchText","boldIndex","childBeginning","substring","childBold","childEnd","values","node","plain","kind","onMouseOver","onFocus","height","overflow"],"sources":["/home/uranus/portfolio/node_modules/grommet/es6/components/SelectMultiple/SelectMultipleContainer.js"],"sourcesContent":["function _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nimport React, { forwardRef, useCallback, useContext, useEffect, useRef, useState } from 'react';\nimport { setFocusWithoutScroll } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { CheckBox } from '../CheckBox';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { SelectionSummary } from './SelectionSummary';\nimport { StyledContainer, OptionsContainer, SelectOption } from '../Select/StyledSelect';\nimport { applyKey, getOptionLabel, getOptionValue, useDisabled, getOptionIndex, arrayIncludes } from '../Select/utils';\nimport { EmptySearchOption } from '../Select/EmptySearchOption';\nimport { MessageContext } from '../../contexts/MessageContext';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar SelectMultipleContainer = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var _optionsRef$current;\n  var allOptions = _ref.allOptions,\n    _ref$children = _ref.children,\n    children = _ref$children === void 0 ? null : _ref$children,\n    disabledProp = _ref.disabled,\n    disabledKey = _ref.disabledKey,\n    dropHeight = _ref.dropHeight,\n    _ref$emptySearchMessa = _ref.emptySearchMessage,\n    emptySearchMessage = _ref$emptySearchMessa === void 0 ? 'No matches found' : _ref$emptySearchMessa,\n    help = _ref.help,\n    icon = _ref.icon,\n    id = _ref.id,\n    labelKey = _ref.labelKey,\n    limit = _ref.limit,\n    messages = _ref.messages,\n    onChange = _ref.onChange,\n    onClose = _ref.onClose,\n    onKeyDown = _ref.onKeyDown,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    optionIndexesInValue = _ref.optionIndexesInValue,\n    options = _ref.options,\n    _ref$replace = _ref.replace,\n    replace = _ref$replace === void 0 ? true : _ref$replace,\n    searchPlaceholder = _ref.searchPlaceholder,\n    search = _ref.search,\n    setSearch = _ref.setSearch,\n    usingKeyboard = _ref.usingKeyboard,\n    _ref$value = _ref.value,\n    value = _ref$value === void 0 ? [] : _ref$value,\n    valueKey = _ref.valueKey,\n    showSelectedInline = _ref.showSelectedInline;\n  var theme = useThemeValue();\n  var _useState = useState(-1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var _useContext = useContext(MessageContext),\n    format = _useContext.format;\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var _useState3 = useState(disabledProp),\n    disabled = _useState3[0],\n    setDisabled = _useState3[1];\n  var activeRef = useRef();\n  var _useState4 = useState(),\n    showA11yLimit = _useState4[0],\n    setShowA11yLimit = _useState4[1];\n  var clearRef = useRef();\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus) {\n        setFocusWithoutScroll(clearButton);\n      } else if (searchRef && searchRef.current) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsRef.current) {\n        setActiveIndex(0);\n      }\n    }, 100); // Drop should be open after 100ms\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, []);\n  useEffect(function () {\n    var optionsNode = optionsRef.current;\n    if (optionsNode != null && optionsNode.children) {\n      var optionNode = optionsNode.children[activeIndex];\n      if (optionNode) optionNode.focus();\n    }\n  }, [activeIndex]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    var optionVal = getOptionValue(index, options, valueKey || labelKey);\n    if (value) {\n      if (value.length === 0) {\n        result = false;\n      } else if (typeof value[0] !== 'object') {\n        result = value.indexOf(optionVal) !== -1;\n      } else if (valueKey) {\n        result = value.some(function (valueItem) {\n          var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey];\n          return valueValue === optionVal;\n        });\n      }\n    }\n    return result;\n  }, [value, valueKey, options, labelKey]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n        var allOptionsIndex = getOptionIndex(allOptions, options[index], valueKey || labelKey);\n        var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n        if (valueIndex === -1 && (!limit || (value == null ? void 0 : value.length) < limit)) {\n          nextOptionIndexesInValue.push(allOptionsIndex);\n        } else {\n          nextOptionIndexesInValue.splice(valueIndex, 1);\n        }\n        var nextValue = nextOptionIndexesInValue.map(function (i) {\n          return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n        });\n        var nextSelected = nextOptionIndexesInValue;\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [labelKey, limit, onChange, optionIndexesInValue, options, allOptions, valueKey, value]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    if (nextActiveIndex !== (options == null ? void 0 : options.length)) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase();\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [onKeyDown, options, onSearch, labelKey]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if (!isDisabled(activeIndex) && activeIndex >= 0 && activeIndex < (options == null ? void 0 : options.length)) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, isDisabled]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n\n  // handle when limit is reached\n  useEffect(function () {\n    var originallyDisabled = function originallyDisabled(index) {\n      var option = allOptions[index];\n      var result;\n      if (disabledKey) {\n        result = applyKey(option, disabledKey);\n      } else if (Array.isArray(disabledProp)) {\n        if (typeof disabledProp[0] === 'number') {\n          result = disabledProp.indexOf(index) !== -1;\n        } else {\n          result = getOptionIndex(disabledProp, getOptionValue(index, options, valueKey || labelKey), valueKey || labelKey) !== -1;\n        }\n      }\n      return result;\n    };\n    if (value && limit) {\n      if (value.length === limit) {\n        var newDisabled = [].concat(disabledProp);\n        // disable everything that is not selected\n        for (var i = 0; i < (options == null ? void 0 : options.length); i += 1) {\n          if (!isSelected(i) && !originallyDisabled(i)) {\n            newDisabled.push(options[i]);\n          }\n        }\n        if (usingKeyboard) setShowA11yLimit('Selected. Maximum selection limit reached.');\n        setDisabled(newDisabled);\n      } else {\n        if (usingKeyboard) setShowA11yLimit(undefined);\n        setDisabled(disabledProp);\n      }\n    }\n  }, [isSelected, value, limit, disabledProp, allOptions, disabledKey, labelKey, options, usingKeyboard, valueKey]);\n\n  // reset showA11yLimit after announcement is read\n  useEffect(function () {\n    if (showA11yLimit !== undefined) {\n      setTimeout(function () {\n        setShowA11yLimit(undefined);\n      }, 2000); // value chosen based on length of a11yLimit message\n    }\n  }, [showA11yLimit]);\n  var summaryContent = /*#__PURE__*/React.createElement(SelectionSummary, {\n    allOptions: allOptions,\n    clearRef: clearRef,\n    disabled: disabled,\n    disabledKey: disabledKey,\n    isSelected: isSelected,\n    labelKey: labelKey,\n    limit: limit,\n    messages: messages,\n    onChange: onChange,\n    onMore: onMore,\n    options: options,\n    search: search,\n    setActiveIndex: setActiveIndex,\n    showSelectedInline: showSelectedInline,\n    value: value,\n    valueKey: valueKey\n  });\n  var helpContent;\n  if (help) {\n    if (typeof help === 'string') helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false,\n      pad: \"xsmall\"\n    }, /*#__PURE__*/React.createElement(Text, {\n      size: \"small\"\n    }, help));else helpContent = /*#__PURE__*/React.createElement(Box, {\n      flex: false\n    }, help);\n  }\n  if (showSelectedInline) summaryContent = /*#__PURE__*/React.createElement(Box, {\n    direction: \"row\",\n    justify: \"between\",\n    flex: false\n  }, summaryContent, /*#__PURE__*/React.createElement(Box, null, /*#__PURE__*/React.createElement(Button, {\n    fill: \"vertical\",\n    onClick: onClose,\n    a11yTitle: \"Close Select\"\n  }, icon)));\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption,\n    onEsc: onClose\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight,\n    a11yTitle: format({\n      id: 'selectMultiple.selectDrop',\n      messages: messages\n    })\n  }, summaryContent, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: function onEnter(event) {\n      onNextOption(event);\n    }\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    a11yTitle: format({\n      id: 'selectMultiple.search',\n      messages: messages\n    }),\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  }))), helpContent, (options == null ? void 0 : options.length) > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"0\",\n    ref: optionsRef,\n    \"aria-multiselectable\": true,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    },\n    \"aria-activedescendant\": optionsRef == null || (_optionsRef$current = optionsRef.current) == null ? void 0 : _optionsRef$current.children[activeIndex]\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = value ? arrayIncludes(value, valueKey && valueKey.reduce ? applyKey(option, valueKey) : option, valueKey || labelKey) : false;\n    var optionActive = activeIndex === index;\n    var optionLabel = getOptionLabel(index, options, labelKey || valueKey);\n\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else {\n      child = /*#__PURE__*/React.createElement(CheckBox, {\n        label: /*#__PURE__*/React.createElement(Box, {\n          alignSelf: \"center\",\n          width: \"100%\",\n          align: \"start\"\n        }, optionLabel),\n        pad: \"xsmall\",\n        tabIndex: \"-1\",\n        checked: optionSelected,\n        disabled: optionDisabled\n      });\n    }\n    if (!children && search) {\n      var searchText = search.toLowerCase();\n      if (typeof optionLabel === 'string' && optionLabel.toLowerCase().indexOf(searchText) >= 0) {\n        // code to bold search term in matching options\n        var boldIndex = optionLabel.toLowerCase().indexOf(searchText);\n        var childBeginning = optionLabel.substring(0, boldIndex);\n        var childBold = optionLabel.substring(boldIndex, boldIndex + searchText.length);\n        childBold = /*#__PURE__*/React.createElement(\"b\", null, childBold);\n        var childEnd = optionLabel.substring(boldIndex + searchText.length);\n        child = /*#__PURE__*/React.createElement(CheckBox, {\n          label: /*#__PURE__*/React.createElement(Box, {\n            alignSelf: \"center\",\n            width: \"100%\",\n            align: \"start\",\n            direction: \"row\"\n          }, /*#__PURE__*/React.createElement(Text, null, childBeginning, childBold, childEnd)),\n          pad: \"xsmall\",\n          tabIndex: \"-1\",\n          checked: optionSelected,\n          disabled: optionDisabled\n        });\n      }\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption, {\n      a11yTitle: format({\n        id: optionSelected ? 'selectMultiple.optionSelected' : 'selectMultiple.optionNotSelected',\n        messages: messages,\n        values: {\n          optionLabel: optionLabel\n        }\n      })\n      // eslint-disable-next-line react/no-array-index-key\n      ,\n      key: index\n      // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      id: \"option\" + index,\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      active: optionActive,\n      selected: optionSelected,\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), usingKeyboard && showA11yLimit && /*#__PURE__*/React.createElement(Box, {\n    height: \"0px\",\n    width: \"0px\",\n    overflow: \"hidden\"\n    // announce when we reach the limit of items\n    // that can be selected\n    ,\n    \"aria-live\": \"assertive\",\n    role: \"alert\"\n  }, showA11yLimit)));\n});\nexport { SelectMultipleContainer };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}