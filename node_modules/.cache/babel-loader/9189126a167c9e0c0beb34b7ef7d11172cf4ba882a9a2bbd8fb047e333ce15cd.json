{"ast":null,"code":"var _excluded = [\"allowSelectAll\", \"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.indexOf(n) >= 0) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { DataContext } from '../../contexts/DataContext';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar emptyData = [];\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n      return buildGroupState(groups, groupBy);\n    }),\n    groupState = _useState[0],\n    setGroupState = _useState[1];\n  var _useState2 = useState({\n      groups: groups,\n      groupBy: groupBy\n    }),\n    prevDeps = _useState2[0],\n    setPrevDeps = _useState2[1];\n  var prevGroups = prevDeps.groups,\n    prevGroupBy = prevDeps.groupBy;\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n  return [groupState, setGroupState];\n}\nvar DataTable = function DataTable(_ref) {\n  var _ref$allowSelectAll = _ref.allowSelectAll,\n    allowSelectAll = _ref$allowSelectAll === void 0 ? true : _ref$allowSelectAll,\n    background = _ref.background,\n    border = _ref.border,\n    columnsProp = _ref.columns,\n    dataProp = _ref.data,\n    disabled = _ref.disabled,\n    fill = _ref.fill,\n    groupByProp = _ref.groupBy,\n    onClickRow = _ref.onClickRow,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    onSelect = _ref.onSelect,\n    onSortProp = _ref.onSort,\n    onUpdate = _ref.onUpdate,\n    replace = _ref.replace,\n    pad = _ref.pad,\n    paginate = _ref.paginate,\n    pin = _ref.pin,\n    placeholder = _ref.placeholder,\n    primaryKey = _ref.primaryKey,\n    resizeable = _ref.resizeable,\n    rowProps = _ref.rowProps,\n    select = _ref.select,\n    showProp = _ref.show,\n    size = _ref.size,\n    sortProp = _ref.sort,\n    sortable = _ref.sortable,\n    rowDetails = _ref.rowDetails,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 50 : _ref$step,\n    verticalAlign = _ref.verticalAlign,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useThemeValue();\n  var _useContext = useContext(DataContext),\n    view = _useContext.view,\n    contextData = _useContext.data,\n    properties = _useContext.properties,\n    onView = _useContext.onView,\n    setSelectedDataContext = _useContext.setSelected;\n  var data = dataProp || contextData || emptyData;\n  var columns = useMemo(function () {\n    var result = [];\n    if (columnsProp) result = columnsProp;else if (properties) result = Object.keys(properties).map(function (p) {\n      return _extends({\n        property: p\n      }, properties[p]);\n    });else if (data.length) result = Object.keys(data[0]).map(function (p) {\n      return {\n        property: p\n      };\n    });\n    if (view != null && view.columns) result = result.filter(function (c) {\n      return view.columns.includes(c.property);\n    }).sort(function (c1, c2) {\n      return view.columns.indexOf(c1.property) - view.columns.indexOf(c2.property);\n    });\n    return result;\n  }, [columnsProp, data, properties, view]);\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]);\n\n  // whether or not we should show a footer\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]);\n\n  // what column we are actively capturing filter input on\n  var _useState3 = useState(),\n    filtering = _useState3[0],\n    setFiltering = _useState3[1];\n\n  // the currently active filters\n  var _useState4 = useState(initializeFilters(columns)),\n    filters = _useState4[0],\n    setFilters = _useState4[1];\n\n  // which column we are sorting on, with direction\n  var _useState5 = useState(sortProp || {}),\n    sort = _useState5[0],\n    setSort = _useState5[1];\n  useEffect(function () {\n    if (sortProp) setSort(sortProp);else if (view != null && view.sort) setSort(view.sort);\n  }, [sortProp, view]);\n\n  // what we are grouping on\n  var groupBy = (view == null ? void 0 : view.groupBy) || groupByProp;\n\n  // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]);\n\n  // the values to put in the footer cells\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]);\n\n  // cell styling properties: background, border, pad\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]);\n\n  // if groupBy, an array with one item per unique groupBy key value\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]);\n\n  // an object indicating which group values are expanded\n  var _useGroupState = useGroupState(groups, groupBy),\n    groupState = _useGroupState[0],\n    setGroupState = _useGroupState[1];\n  var _useState6 = useState(step),\n    limit = _useState6[0],\n    setLimit = _useState6[1];\n  var _useState7 = useState(select || onSelect && [] || undefined),\n    selected = _useState7[0],\n    setSelected = _useState7[1];\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n  useEffect(function () {\n    if (select && setSelectedDataContext) {\n      setSelectedDataContext(select.length);\n    }\n  }, [select, setSelectedDataContext]);\n  var _useState8 = useState([]),\n    rowExpand = _useState8[0],\n    setRowExpand = _useState8[1];\n\n  // any customized column widths\n  var _useState9 = useState({}),\n    widths = _useState9[0],\n    setWidths = _useState9[1];\n\n  // placeholder placement stuff\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n  var _useState10 = useState(),\n    headerHeight = _useState10[0],\n    setHeaderHeight = _useState10[1];\n  var _useState11 = useState(),\n    footerHeight = _useState11[0],\n    setFooterHeight = _useState11[1];\n\n  // offset compensation when body overflows\n  var _useState12 = useState(0),\n    scrollOffset = _useState12[0],\n    setScrollOffset = _useState12[1];\n\n  // multiple pinned columns offset\n  var _useState13 = useState(),\n    pinnedOffset = _useState13[0],\n    setPinnedOffset = _useState13[1];\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n    var nextPinnedOffset = {};\n    if (columnWidths.length !== 0) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]);\n\n  // remember that we are filtering on this property\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  };\n\n  // remember the search text we should filter this property by\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n    nextFilters[property] = value;\n    setFilters(nextFilters);\n    // Let caller know about search, if interested\n    if (onSearch) onSearch(nextFilters);\n  };\n\n  // toggle the sort direction on this property\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onView) {\n        onView(_extends({}, view, {\n          sort: {\n            property: property,\n            direction: direction\n          }\n        }));\n      }\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (onSortProp) onSortProp(nextSort);\n    };\n  };\n\n  // toggle whether the group is expanded\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  };\n\n  // toggle whether all groups are expanded\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  };\n\n  // remember the width this property's column should be\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n  var _usePagination = usePagination(_extends({\n      data: adjustedData,\n      page: normalizeShow(showProp, step),\n      step: step\n    }, paginate)),\n    items = _usePagination[0],\n    paginationProps = _usePagination[1];\n  var paginationStep = paginationProps.step;\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined;\n\n  // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    }\n  } : undefined;\n\n  // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n  var handleSelect = function handleSelect(nextSelected, row) {\n    setSelected(nextSelected);\n    if (setSelectedDataContext) setSelectedDataContext(nextSelected.length);\n    if (row) onSelect(nextSelected, row);else onSelect(nextSelected);\n  };\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: {\n      body: cellProps.body,\n      groupHeader: _extends({}, cellProps.body, cellProps.groupHeader)\n    },\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? handleSelect : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: paginationStep,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? handleSelect : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: paginationStep,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    allowSelectAll: allowSelectAll,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? handleSelect : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > paginationStep && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","indexOf","React","useCallback","useContext","useEffect","useMemo","useRef","useState","Fragment","useLayoutEffect","DataContext","Box","Text","Header","Footer","Body","GroupedBody","Pagination","buildFooterValues","buildGroups","buildGroupState","filterAndSortData","initializeFilters","normalizeCellProps","normalizePrimaryProperty","normalizeShow","usePagination","StyledContainer","StyledDataTable","StyledPlaceholder","DataTablePropTypes","PlaceholderBody","useThemeValue","emptyData","useGroupState","groups","groupBy","_useState","groupState","setGroupState","_useState2","prevDeps","setPrevDeps","prevGroups","prevGroupBy","nextGroupState","DataTable","_ref","_ref$allowSelectAll","allowSelectAll","background","border","columnsProp","columns","dataProp","data","disabled","fill","groupByProp","onClickRow","onMore","onSearch","onSelect","onSortProp","onSort","onUpdate","replace","pad","paginate","pin","placeholder","primaryKey","resizeable","rowProps","select","showProp","show","size","sortProp","sort","sortable","rowDetails","_ref$step","step","verticalAlign","rest","theme","_useContext","view","contextData","properties","onView","setSelectedDataContext","setSelected","result","keys","map","p","property","filter","c","includes","c1","c2","primaryProperty","showFooter","footer","_useState3","filtering","setFiltering","_useState4","filters","setFilters","_useState5","setSort","adjustedData","footerValues","cellProps","_useGroupState","_useState6","limit","setLimit","_useState7","undefined","selected","_useState8","rowExpand","setRowExpand","_useState9","widths","setWidths","headerRef","bodyRef","footerRef","_useState10","headerHeight","setHeaderHeight","_useState11","footerHeight","setFooterHeight","_useState12","scrollOffset","setScrollOffset","_useState13","pinnedOffset","setPinnedOffset","onHeaderWidths","columnWidths","hasSelectColumn","Boolean","pinnedProperties","pinnedColumn","concat","nextPinnedOffset","forEach","index","columnIndex","findIndex","column","width","left","_bodyRef$current$pare","nextScrollOffset","current","parentElement","clientWidth","nextHeaderHeight","getBoundingClientRect","height","nextFooterHeight","onFiltering","onFilter","value","nextFilters","external","direction","nextSort","opts","count","expanded","k","onToggleGroup","groupValue","expandedKeys","onExpand","onToggleGroups","onResize","nextWidths","console","warn","_usePagination","page","items","paginationProps","paginationStep","Container","containterProps","dataTable","container","OverflowContainer","overflowContainerProps","overflow","horizontal","paginatedDataTableProps","style","minWidth","placeholderContent","createElement","color","opacity","align","justify","handleSelect","nextSelected","row","bodyContent","ref","body","groupHeader","prev","onToggle","pinnedCellProps","pinned","fillProp","header","onWidths","top","bottom","alignSelf","propTypes"],"sources":["/home/uranus/portfolio/node_modules/grommet/es6/components/DataTable/DataTable.js"],"sourcesContent":["var _excluded = [\"allowSelectAll\", \"background\", \"border\", \"columns\", \"data\", \"disabled\", \"fill\", \"groupBy\", \"onClickRow\", \"onMore\", \"onSearch\", \"onSelect\", \"onSort\", \"onUpdate\", \"replace\", \"pad\", \"paginate\", \"pin\", \"placeholder\", \"primaryKey\", \"resizeable\", \"rowProps\", \"select\", \"show\", \"size\", \"sort\", \"sortable\", \"rowDetails\", \"step\", \"verticalAlign\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.indexOf(n) >= 0) continue; t[n] = r[n]; } return t; }\nimport React, { useCallback, useContext, useEffect, useMemo, useRef, useState, Fragment } from 'react';\nimport { useLayoutEffect } from '../../utils/use-isomorphic-layout-effect';\nimport { DataContext } from '../../contexts/DataContext';\nimport { Box } from '../Box';\nimport { Text } from '../Text';\nimport { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Body } from './Body';\nimport { GroupedBody } from './GroupedBody';\nimport { Pagination } from '../Pagination';\nimport { buildFooterValues, buildGroups, buildGroupState, filterAndSortData, initializeFilters, normalizeCellProps, normalizePrimaryProperty } from './buildState';\nimport { normalizeShow, usePagination } from '../../utils';\nimport { StyledContainer, StyledDataTable, StyledPlaceholder } from './StyledDataTable';\nimport { DataTablePropTypes } from './propTypes';\nimport { PlaceholderBody } from './PlaceholderBody';\nimport { useThemeValue } from '../../utils/useThemeValue';\nvar emptyData = [];\nfunction useGroupState(groups, groupBy) {\n  var _useState = useState(function () {\n      return buildGroupState(groups, groupBy);\n    }),\n    groupState = _useState[0],\n    setGroupState = _useState[1];\n  var _useState2 = useState({\n      groups: groups,\n      groupBy: groupBy\n    }),\n    prevDeps = _useState2[0],\n    setPrevDeps = _useState2[1];\n  var prevGroups = prevDeps.groups,\n    prevGroupBy = prevDeps.groupBy;\n  if (groups !== prevGroups || groupBy !== prevGroupBy) {\n    setPrevDeps({\n      groups: groups,\n      groupBy: groupBy\n    });\n    var nextGroupState = buildGroupState(groups, groupBy);\n    setGroupState(nextGroupState);\n    return [nextGroupState, setGroupState];\n  }\n  return [groupState, setGroupState];\n}\nvar DataTable = function DataTable(_ref) {\n  var _ref$allowSelectAll = _ref.allowSelectAll,\n    allowSelectAll = _ref$allowSelectAll === void 0 ? true : _ref$allowSelectAll,\n    background = _ref.background,\n    border = _ref.border,\n    columnsProp = _ref.columns,\n    dataProp = _ref.data,\n    disabled = _ref.disabled,\n    fill = _ref.fill,\n    groupByProp = _ref.groupBy,\n    onClickRow = _ref.onClickRow,\n    onMore = _ref.onMore,\n    onSearch = _ref.onSearch,\n    onSelect = _ref.onSelect,\n    onSortProp = _ref.onSort,\n    onUpdate = _ref.onUpdate,\n    replace = _ref.replace,\n    pad = _ref.pad,\n    paginate = _ref.paginate,\n    pin = _ref.pin,\n    placeholder = _ref.placeholder,\n    primaryKey = _ref.primaryKey,\n    resizeable = _ref.resizeable,\n    rowProps = _ref.rowProps,\n    select = _ref.select,\n    showProp = _ref.show,\n    size = _ref.size,\n    sortProp = _ref.sort,\n    sortable = _ref.sortable,\n    rowDetails = _ref.rowDetails,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 50 : _ref$step,\n    verticalAlign = _ref.verticalAlign,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var theme = useThemeValue();\n  var _useContext = useContext(DataContext),\n    view = _useContext.view,\n    contextData = _useContext.data,\n    properties = _useContext.properties,\n    onView = _useContext.onView,\n    setSelectedDataContext = _useContext.setSelected;\n  var data = dataProp || contextData || emptyData;\n  var columns = useMemo(function () {\n    var result = [];\n    if (columnsProp) result = columnsProp;else if (properties) result = Object.keys(properties).map(function (p) {\n      return _extends({\n        property: p\n      }, properties[p]);\n    });else if (data.length) result = Object.keys(data[0]).map(function (p) {\n      return {\n        property: p\n      };\n    });\n    if (view != null && view.columns) result = result.filter(function (c) {\n      return view.columns.includes(c.property);\n    }).sort(function (c1, c2) {\n      return view.columns.indexOf(c1.property) - view.columns.indexOf(c2.property);\n    });\n    return result;\n  }, [columnsProp, data, properties, view]);\n\n  // property name of the primary property\n  var primaryProperty = useMemo(function () {\n    return normalizePrimaryProperty(columns, primaryKey);\n  }, [columns, primaryKey]);\n\n  // whether or not we should show a footer\n  var showFooter = useMemo(function () {\n    return columns.filter(function (c) {\n      return c.footer;\n    }).length > 0;\n  }, [columns]);\n\n  // what column we are actively capturing filter input on\n  var _useState3 = useState(),\n    filtering = _useState3[0],\n    setFiltering = _useState3[1];\n\n  // the currently active filters\n  var _useState4 = useState(initializeFilters(columns)),\n    filters = _useState4[0],\n    setFilters = _useState4[1];\n\n  // which column we are sorting on, with direction\n  var _useState5 = useState(sortProp || {}),\n    sort = _useState5[0],\n    setSort = _useState5[1];\n  useEffect(function () {\n    if (sortProp) setSort(sortProp);else if (view != null && view.sort) setSort(view.sort);\n  }, [sortProp, view]);\n\n  // what we are grouping on\n  var groupBy = (view == null ? void 0 : view.groupBy) || groupByProp;\n\n  // the data filtered and sorted, if needed\n  // Note: onUpdate mode expects the data to be passed\n  //   in completely filtered and sorted already.\n  var adjustedData = useMemo(function () {\n    return onUpdate ? data : filterAndSortData(data, filters, onSearch, sort);\n  }, [data, filters, onSearch, onUpdate, sort]);\n\n  // the values to put in the footer cells\n  var footerValues = useMemo(function () {\n    return buildFooterValues(columns, adjustedData);\n  }, [adjustedData, columns]);\n\n  // cell styling properties: background, border, pad\n  var cellProps = useMemo(function () {\n    return normalizeCellProps({\n      background: background,\n      border: border,\n      pad: pad,\n      pin: pin\n    }, theme);\n  }, [background, border, pad, pin, theme]);\n\n  // if groupBy, an array with one item per unique groupBy key value\n  var groups = useMemo(function () {\n    return buildGroups(columns, adjustedData, groupBy, primaryProperty);\n  }, [adjustedData, columns, groupBy, primaryProperty]);\n\n  // an object indicating which group values are expanded\n  var _useGroupState = useGroupState(groups, groupBy),\n    groupState = _useGroupState[0],\n    setGroupState = _useGroupState[1];\n  var _useState6 = useState(step),\n    limit = _useState6[0],\n    setLimit = _useState6[1];\n  var _useState7 = useState(select || onSelect && [] || undefined),\n    selected = _useState7[0],\n    setSelected = _useState7[1];\n  useEffect(function () {\n    return setSelected(select || onSelect && [] || undefined);\n  }, [onSelect, select]);\n  useEffect(function () {\n    if (select && setSelectedDataContext) {\n      setSelectedDataContext(select.length);\n    }\n  }, [select, setSelectedDataContext]);\n  var _useState8 = useState([]),\n    rowExpand = _useState8[0],\n    setRowExpand = _useState8[1];\n\n  // any customized column widths\n  var _useState9 = useState({}),\n    widths = _useState9[0],\n    setWidths = _useState9[1];\n\n  // placeholder placement stuff\n  var headerRef = useRef();\n  var bodyRef = useRef();\n  var footerRef = useRef();\n  var _useState10 = useState(),\n    headerHeight = _useState10[0],\n    setHeaderHeight = _useState10[1];\n  var _useState11 = useState(),\n    footerHeight = _useState11[0],\n    setFooterHeight = _useState11[1];\n\n  // offset compensation when body overflows\n  var _useState12 = useState(0),\n    scrollOffset = _useState12[0],\n    setScrollOffset = _useState12[1];\n\n  // multiple pinned columns offset\n  var _useState13 = useState(),\n    pinnedOffset = _useState13[0],\n    setPinnedOffset = _useState13[1];\n  var onHeaderWidths = useCallback(function (columnWidths) {\n    var hasSelectColumn = Boolean(select || onSelect);\n    var pinnedProperties = columns.map(function (pinnedColumn) {\n      return pinnedColumn.pin && pinnedColumn.property;\n    }).filter(function (n) {\n      return n;\n    });\n    if (hasSelectColumn && pinnedProperties.length > 0) {\n      pinnedProperties = ['_grommetDataTableSelect'].concat(pinnedProperties);\n    }\n    var nextPinnedOffset = {};\n    if (columnWidths.length !== 0) {\n      pinnedProperties.forEach(function (property, index) {\n        var columnIndex = property === '_grommetDataTableSelect' ? 0 : columns.findIndex(function (column) {\n          return column.property === property;\n        }) + hasSelectColumn;\n        if (columnWidths[columnIndex]) {\n          nextPinnedOffset[property] = {\n            width: columnWidths[columnIndex],\n            left: index === 0 ? 0 : nextPinnedOffset[pinnedProperties[index - 1]].left + nextPinnedOffset[pinnedProperties[index - 1]].width\n          };\n        }\n      });\n      setPinnedOffset(nextPinnedOffset);\n    }\n  }, [columns, setPinnedOffset, select, onSelect]);\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  useLayoutEffect(function () {\n    var _bodyRef$current$pare;\n    var nextScrollOffset = (((_bodyRef$current$pare = bodyRef.current.parentElement) == null ? void 0 : _bodyRef$current$pare.clientWidth) || 0) - bodyRef.current.clientWidth;\n    if (nextScrollOffset !== scrollOffset) setScrollOffset(nextScrollOffset);\n  });\n  useLayoutEffect(function () {\n    if (placeholder) {\n      if (headerRef.current) {\n        var nextHeaderHeight = headerRef.current.getBoundingClientRect().height;\n        setHeaderHeight(nextHeaderHeight);\n      } else setHeaderHeight(0);\n      if (footerRef.current) {\n        var nextFooterHeight = footerRef.current.getBoundingClientRect().height;\n        setFooterHeight(nextFooterHeight);\n      } else setFooterHeight(0);\n    }\n  }, [footerRef, headerRef, placeholder]);\n\n  // remember that we are filtering on this property\n  var onFiltering = function onFiltering(property) {\n    return setFiltering(property);\n  };\n\n  // remember the search text we should filter this property by\n  var onFilter = function onFilter(property, value) {\n    var nextFilters = _extends({}, filters);\n    nextFilters[property] = value;\n    setFilters(nextFilters);\n    // Let caller know about search, if interested\n    if (onSearch) onSearch(nextFilters);\n  };\n\n  // toggle the sort direction on this property\n  var onSort = function onSort(property) {\n    return function () {\n      var external = sort ? sort.external : false;\n      var direction;\n      if (!sort || property !== sort.property) direction = 'asc';else if (sort.direction === 'asc') direction = 'desc';else direction = 'asc';\n      var nextSort = {\n        property: property,\n        direction: direction,\n        external: external\n      };\n      setSort(nextSort);\n      if (onView) {\n        onView(_extends({}, view, {\n          sort: {\n            property: property,\n            direction: direction\n          }\n        }));\n      }\n      if (onUpdate) {\n        var opts = {\n          count: limit,\n          sort: nextSort\n        };\n        if (groups) {\n          opts.expanded = Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          });\n        }\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (onSortProp) onSortProp(nextSort);\n    };\n  };\n\n  // toggle whether the group is expanded\n  var onToggleGroup = function onToggleGroup(groupValue) {\n    return function () {\n      var nextGroupState = _extends({}, groupState);\n      nextGroupState[groupValue] = _extends({}, nextGroupState[groupValue], {\n        expanded: !nextGroupState[groupValue].expanded\n      });\n      setGroupState(nextGroupState);\n      var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n        return nextGroupState[k].expanded;\n      });\n      if (onUpdate) {\n        var opts = {\n          expanded: expandedKeys,\n          count: limit\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n      }\n      if (groupBy.onExpand) {\n        groupBy.onExpand(expandedKeys);\n      }\n    };\n  };\n\n  // toggle whether all groups are expanded\n  var onToggleGroups = function onToggleGroups() {\n    var expanded = Object.keys(groupState).filter(function (k) {\n      return !groupState[k].expanded;\n    }).length === 0;\n    var nextGroupState = {};\n    Object.keys(groupState).forEach(function (k) {\n      nextGroupState[k] = _extends({}, groupState[k], {\n        expanded: !expanded\n      });\n    });\n    setGroupState(nextGroupState);\n    var expandedKeys = Object.keys(nextGroupState).filter(function (k) {\n      return nextGroupState[k].expanded;\n    });\n    if (onUpdate) {\n      var opts = {\n        expanded: expandedKeys,\n        count: limit\n      };\n      if (showProp) opts.show = showProp;\n      if (sort != null && sort.property) opts.sort = sort;\n      onUpdate(opts);\n    }\n    if (groupBy.onExpand) {\n      groupBy.onExpand(expandedKeys);\n    }\n  };\n\n  // remember the width this property's column should be\n  var onResize = useCallback(function (property, width) {\n    if (widths[property] !== width) {\n      var nextWidths = _extends({}, widths);\n      nextWidths[property] = width;\n      setWidths(nextWidths);\n    }\n  }, [widths]);\n  if (size && resizeable) {\n    console.warn('DataTable cannot combine \"size\" and \"resizeble\".');\n  }\n  if (onUpdate && onMore) {\n    console.warn('DataTable cannot combine \"onUpdate\" and \"onMore\".');\n  }\n  var _usePagination = usePagination(_extends({\n      data: adjustedData,\n      page: normalizeShow(showProp, step),\n      step: step\n    }, paginate)),\n    items = _usePagination[0],\n    paginationProps = _usePagination[1];\n  var paginationStep = paginationProps.step;\n  var Container = paginate ? StyledContainer : Fragment;\n  var containterProps = paginate ? _extends({}, theme.dataTable.container, {\n    fill: fill\n  }) : undefined;\n\n  // DataTable should overflow if paginating but pagination component\n  // should remain in its location\n  var OverflowContainer = paginate ? Box : Fragment;\n  var overflowContainerProps = paginate ? {\n    overflow: {\n      horizontal: 'auto'\n    }\n  } : undefined;\n\n  // necessary for Firefox, otherwise paginated DataTable will\n  // not fill its container like it does by default on other\n  // browsers like Chrome/Safari\n  var paginatedDataTableProps = paginate && (fill === true || fill === 'horizontal') ? {\n    style: {\n      minWidth: '100%'\n    }\n  } : undefined;\n  var placeholderContent = placeholder;\n  if (placeholder && typeof placeholder === 'string') {\n    placeholderContent = /*#__PURE__*/React.createElement(Box, {\n      background: {\n        color: 'background-front',\n        opacity: 'strong'\n      },\n      align: \"center\",\n      justify: \"center\",\n      fill: \"vertical\"\n    }, /*#__PURE__*/React.createElement(Text, null, placeholder));\n  }\n  var handleSelect = function handleSelect(nextSelected, row) {\n    setSelected(nextSelected);\n    if (setSelectedDataContext) setSelectedDataContext(nextSelected.length);\n    if (row) onSelect(nextSelected, row);else onSelect(nextSelected);\n  };\n  var bodyContent = groups ? /*#__PURE__*/React.createElement(GroupedBody, {\n    ref: bodyRef,\n    cellProps: {\n      body: cellProps.body,\n      groupHeader: _extends({}, cellProps.body, cellProps.groupHeader)\n    },\n    columns: columns,\n    disabled: disabled,\n    groupBy: typeof groupBy === 'string' ? {\n      property: groupBy\n    } : groupBy,\n    groups: groups,\n    groupState: groupState,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          expanded: Object.keys(groupState).filter(function (k) {\n            return groupState[k].expanded;\n          }),\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    onSelect: onSelect ? handleSelect : undefined,\n    onToggle: onToggleGroup,\n    onUpdate: onUpdate,\n    replace: replace,\n    rowProps: rowProps,\n    selected: selected,\n    size: size,\n    step: paginationStep,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  }) : /*#__PURE__*/React.createElement(Body, {\n    ref: bodyRef,\n    cellProps: cellProps.body,\n    columns: columns,\n    data: !paginate ? adjustedData : items,\n    disabled: disabled,\n    onMore: onUpdate ? function () {\n      if (adjustedData.length === limit) {\n        var opts = {\n          count: limit + paginationStep\n        };\n        if (sort != null && sort.property) opts.sort = sort;\n        if (showProp) opts.show = showProp;\n        onUpdate(opts);\n        setLimit(function (prev) {\n          return prev + paginationStep;\n        });\n      }\n    } : onMore,\n    replace: replace,\n    onClickRow: onClickRow,\n    onSelect: onSelect ? handleSelect : undefined,\n    pinnedCellProps: cellProps.pinned,\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    rowProps: rowProps,\n    selected: selected,\n    show: !paginate ? showProp : undefined,\n    size: size,\n    step: paginationStep,\n    rowDetails: rowDetails,\n    rowExpand: rowExpand,\n    setRowExpand: setRowExpand,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.body\n  });\n  return /*#__PURE__*/React.createElement(Container, containterProps, /*#__PURE__*/React.createElement(OverflowContainer, overflowContainerProps, /*#__PURE__*/React.createElement(StyledDataTable, _extends({\n    fillProp: !paginate ? fill : undefined\n  }, paginatedDataTableProps, rest), /*#__PURE__*/React.createElement(Header, {\n    ref: headerRef,\n    allowSelectAll: allowSelectAll,\n    cellProps: cellProps.header,\n    columns: columns,\n    data: adjustedData,\n    disabled: disabled,\n    fill: fill,\n    filtering: filtering,\n    filters: filters,\n    groupBy: groupBy,\n    groups: groups,\n    groupState: groupState,\n    pin: pin === true || pin === 'header',\n    pinnedOffset: pinnedOffset,\n    selected: selected,\n    size: size,\n    sort: sort,\n    widths: widths,\n    onFiltering: onFiltering,\n    onFilter: onFilter,\n    onResize: resizeable ? onResize : undefined,\n    onSelect: onSelect ? handleSelect : undefined,\n    onSort: sortable || sortProp || onSortProp ? onSort : undefined,\n    onToggle: onToggleGroups,\n    onWidths: onHeaderWidths,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    rowDetails: rowDetails,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.header\n  }), placeholder && (!items || items.length === 0) ? /*#__PURE__*/React.createElement(PlaceholderBody, {\n    ref: bodyRef,\n    columns: columns,\n    onSelect: onSelect\n  }, placeholderContent) : bodyContent, showFooter && /*#__PURE__*/React.createElement(Footer, {\n    ref: footerRef,\n    cellProps: cellProps.footer,\n    columns: columns,\n    fill: fill,\n    footerValues: footerValues,\n    groups: groups,\n    onSelect: onSelect,\n    pin: pin === true || pin === 'footer',\n    pinnedOffset: pinnedOffset,\n    primaryProperty: primaryProperty,\n    scrollOffset: scrollOffset,\n    selected: selected,\n    size: size,\n    verticalAlign: typeof verticalAlign === 'string' ? verticalAlign : verticalAlign == null ? void 0 : verticalAlign.footer\n  }), placeholder && items && items.length > 0 && /*#__PURE__*/React.createElement(StyledPlaceholder, {\n    top: headerHeight,\n    bottom: footerHeight\n  }, placeholderContent))), paginate && adjustedData.length > paginationStep && items && items.length ? /*#__PURE__*/React.createElement(Pagination, _extends({\n    alignSelf: \"end\"\n  }, paginationProps)) : null);\n};\nDataTable.propTypes = DataTablePropTypes;\nexport { DataTable };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}