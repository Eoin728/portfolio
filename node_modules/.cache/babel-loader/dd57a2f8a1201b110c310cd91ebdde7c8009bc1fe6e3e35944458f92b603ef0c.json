{"ast":null,"code":"var _excluded = [\"clear\", \"onClear\", \"name\", \"theme\"];\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function (n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction _objectWithoutPropertiesLoose(r, e) {\n  if (null == r) return {};\n  var t = {};\n  for (var n in r) if ({}.hasOwnProperty.call(r, n)) {\n    if (e.indexOf(n) >= 0) continue;\n    t[n] = r[n];\n  }\n  return t;\n}\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { setFocusWithoutScroll, getHoverIndicatorStyle, containsFocus } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer, OptionsContainer, SelectOption } from './StyledSelect';\nimport { applyKey, useDisabled, getOptionLabel, getOptionValue } from './utils';\nimport { EmptySearchOption } from './EmptySearchOption';\nimport { useThemeValue } from '../../utils/useThemeValue';\nimport { withTheme } from '../../default-props';\n\n// ensure ClearButton receives visual indication of keyboard\nvar StyledButton = styled(Button).attrs(withTheme).withConfig({\n  displayName: \"SelectContainer__StyledButton\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"&:focus{\", \"}\"], function (props) {\n  return getHoverIndicatorStyle('background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n    onClear = _ref.onClear,\n    name = _ref.name,\n    theme = _ref.theme,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var label = clear.label,\n    position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(StyledButton, _extends({\n    a11yTitle: buttonLabel + \". Or, press \" + (position === 'bottom' ? 'shift tab' : 'down arrow') + \" to move to select options\",\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, rest), /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n    _ref2$children = _ref2.children,\n    children = _ref2$children === void 0 ? null : _ref2$children,\n    disabled = _ref2.disabled,\n    disabledKey = _ref2.disabledKey,\n    dropHeight = _ref2.dropHeight,\n    _ref2$emptySearchMess = _ref2.emptySearchMessage,\n    emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n    id = _ref2.id,\n    labelKey = _ref2.labelKey,\n    multiple = _ref2.multiple,\n    name = _ref2.name,\n    onChange = _ref2.onChange,\n    onKeyDown = _ref2.onKeyDown,\n    onMore = _ref2.onMore,\n    onSearch = _ref2.onSearch,\n    optionIndexesInValue = _ref2.optionIndexesInValue,\n    options = _ref2.options,\n    allOptions = _ref2.allOptions,\n    searchPlaceholder = _ref2.searchPlaceholder,\n    search = _ref2.search,\n    setSearch = _ref2.setSearch,\n    selected = _ref2.selected,\n    usingKeyboard = _ref2.usingKeyboard,\n    _ref2$value = _ref2.value,\n    value = _ref2$value === void 0 ? '' : _ref2$value,\n    valueKey = _ref2.valueKey,\n    _ref2$replace = _ref2.replace,\n    replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useThemeValue();\n  var shouldShowClearButton = useCallback(function (position) {\n    var hasValue = Boolean(multiple && value ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  }, [clear, multiple, value]);\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n  var _useState = useState(usingKeyboard && !shouldShowClearButton('top') && !onSearch ? 0 : -1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef();\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex >= 0) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n      if (onSearch) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus && !activeRef.current) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = getOptionValue(index, options, valueKey);\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey] || valueItem[valueKey.key];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && value !== null && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n    return result;\n  }, [selected, value, valueKey, options]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options, isDisabled]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus && shouldShowClearButton('top')) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(clearButton);\n      } else if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, shouldShowClearButton]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [isDisabled, labelKey, onKeyDown, options, onSearch]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if ((shouldShowClearButton('bottom') || shouldShowClearButton('top')) && containsFocus(clearRef.current)) {\n      onChange(event, {\n        option: undefined,\n        value: '',\n        selected: ''\n      });\n    } else if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, onChange, shouldShowClearButton]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, getOptionLabel(index, options, labelKey)));\n      textComponent = true;\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption\n    // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index\n      // merge optionRef and activeRef\n      ,\n\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? getOptionLabel(index, options, labelKey || valueKey) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected\n      // allow keyboard navigation to start from\n      // selected option after tabbing to it\n      ,\n\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  })));\n});\nexport { SelectContainer };","map":{"version":3,"names":["_excluded","_extends","Object","assign","bind","n","e","arguments","length","t","r","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","indexOf","React","forwardRef","useCallback","useEffect","useRef","useState","styled","setFocusWithoutScroll","getHoverIndicatorStyle","containsFocus","Box","Button","InfiniteScroll","Keyboard","Text","TextInput","StyledContainer","OptionsContainer","SelectOption","applyKey","useDisabled","getOptionLabel","getOptionValue","EmptySearchOption","useThemeValue","withTheme","StyledButton","attrs","withConfig","displayName","componentId","props","theme","ClearButton","_ref","ref","clear","onClear","name","rest","label","position","align","buttonLabel","createElement","a11yTitle","fill","onClick","focusIndicator","select","container","text","SelectContainer","_ref2","_ref2$children","children","disabled","disabledKey","dropHeight","_ref2$emptySearchMess","emptySearchMessage","id","labelKey","multiple","onChange","onKeyDown","onMore","onSearch","optionIndexesInValue","options","allOptions","searchPlaceholder","search","setSearch","selected","usingKeyboard","_ref2$value","value","valueKey","_ref2$replace","replace","shouldShowClearButton","hasValue","Boolean","showAtPosition","isDisabled","_useState","activeIndex","setActiveIndex","_useState2","keyboardNavigation","setKeyboardNavigation","searchRef","optionsRef","clearRef","activeRef","_activeRef$current","current","focus","timer","setTimeout","optionsNode","clearButton","searchInput","clearTimeout","isSelected","index","result","optionVal","Array","isArray","some","valueItem","valueValue","key","selectOption","event","nextValue","nextSelected","nextOptionIndexesInValue","slice","allOptionsIndex","valueIndex","push","splice","map","i","reduce","option","undefined","onNextOption","preventDefault","nextActiveIndex","onPreviousOption","onKeyDownOption","findIndex","charAt","toLowerCase","onActiveOption","onSelectOption","customSearchInput","SelectTextInput","selectOptionsStyle","box","onEnter","onSpace","onUp","onDown","pad","flex","size","type","placeholder","nextSearch","target","onFocus","onMouseOver","role","tabIndex","onMouseMove","items","step","show","optionRef","optionDisabled","optionSelected","optionActive","child","textComponent","active","node","plain","kind"],"sources":["/home/uranus/portfolio/node_modules/grommet/es6/components/Select/SelectContainer.js"],"sourcesContent":["var _excluded = [\"clear\", \"onClear\", \"name\", \"theme\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (e.indexOf(n) >= 0) continue; t[n] = r[n]; } return t; }\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from 'react';\nimport styled from 'styled-components';\nimport { setFocusWithoutScroll, getHoverIndicatorStyle, containsFocus } from '../../utils';\nimport { Box } from '../Box';\nimport { Button } from '../Button';\nimport { InfiniteScroll } from '../InfiniteScroll';\nimport { Keyboard } from '../Keyboard';\nimport { Text } from '../Text';\nimport { TextInput } from '../TextInput';\nimport { StyledContainer, OptionsContainer, SelectOption } from './StyledSelect';\nimport { applyKey, useDisabled, getOptionLabel, getOptionValue } from './utils';\nimport { EmptySearchOption } from './EmptySearchOption';\nimport { useThemeValue } from '../../utils/useThemeValue';\nimport { withTheme } from '../../default-props';\n\n// ensure ClearButton receives visual indication of keyboard\nvar StyledButton = styled(Button).attrs(withTheme).withConfig({\n  displayName: \"SelectContainer__StyledButton\",\n  componentId: \"sc-1wi0ul8-0\"\n})([\"&:focus{\", \"}\"], function (props) {\n  return getHoverIndicatorStyle('background', props.theme);\n});\nvar ClearButton = /*#__PURE__*/forwardRef(function (_ref, ref) {\n  var clear = _ref.clear,\n    onClear = _ref.onClear,\n    name = _ref.name,\n    theme = _ref.theme,\n    rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n  var label = clear.label,\n    position = clear.position;\n  var align = position !== 'bottom' ? 'start' : 'center';\n  var buttonLabel = label || \"Clear \" + (name || 'selection');\n  return /*#__PURE__*/React.createElement(StyledButton, _extends({\n    a11yTitle: buttonLabel + \". Or, press \" + (position === 'bottom' ? 'shift tab' : 'down arrow') + \" to move to select options\",\n    fill: \"horizontal\",\n    ref: ref,\n    onClick: onClear,\n    focusIndicator: false\n  }, rest), /*#__PURE__*/React.createElement(Box, _extends({}, theme.select.clear.container, {\n    align: align\n  }), /*#__PURE__*/React.createElement(Text, theme.select.clear.text, buttonLabel)));\n});\nvar SelectContainer = /*#__PURE__*/forwardRef(function (_ref2, ref) {\n  var clear = _ref2.clear,\n    _ref2$children = _ref2.children,\n    children = _ref2$children === void 0 ? null : _ref2$children,\n    disabled = _ref2.disabled,\n    disabledKey = _ref2.disabledKey,\n    dropHeight = _ref2.dropHeight,\n    _ref2$emptySearchMess = _ref2.emptySearchMessage,\n    emptySearchMessage = _ref2$emptySearchMess === void 0 ? 'No matches found' : _ref2$emptySearchMess,\n    id = _ref2.id,\n    labelKey = _ref2.labelKey,\n    multiple = _ref2.multiple,\n    name = _ref2.name,\n    onChange = _ref2.onChange,\n    onKeyDown = _ref2.onKeyDown,\n    onMore = _ref2.onMore,\n    onSearch = _ref2.onSearch,\n    optionIndexesInValue = _ref2.optionIndexesInValue,\n    options = _ref2.options,\n    allOptions = _ref2.allOptions,\n    searchPlaceholder = _ref2.searchPlaceholder,\n    search = _ref2.search,\n    setSearch = _ref2.setSearch,\n    selected = _ref2.selected,\n    usingKeyboard = _ref2.usingKeyboard,\n    _ref2$value = _ref2.value,\n    value = _ref2$value === void 0 ? '' : _ref2$value,\n    valueKey = _ref2.valueKey,\n    _ref2$replace = _ref2.replace,\n    replace = _ref2$replace === void 0 ? true : _ref2$replace;\n  var theme = useThemeValue();\n  var shouldShowClearButton = useCallback(function (position) {\n    var hasValue = Boolean(multiple && value ? value.length : value);\n    var showAtPosition = position === 'bottom' ? (clear == null ? void 0 : clear.position) === 'bottom' : (clear == null ? void 0 : clear.position) !== 'bottom';\n    return clear && hasValue && showAtPosition;\n  }, [clear, multiple, value]);\n  var isDisabled = useDisabled(disabled, disabledKey, options, valueKey || labelKey);\n  var _useState = useState(usingKeyboard && !shouldShowClearButton('top') && !onSearch ? 0 : -1),\n    activeIndex = _useState[0],\n    setActiveIndex = _useState[1];\n  var _useState2 = useState(usingKeyboard),\n    keyboardNavigation = _useState2[0],\n    setKeyboardNavigation = _useState2[1];\n  var searchRef = useRef();\n  var optionsRef = useRef();\n  var clearRef = useRef();\n  var activeRef = useRef();\n\n  // for keyboard/screenreader, keep the active option in focus\n  useEffect(function () {\n    var _activeRef$current;\n    if (activeIndex >= 0) (_activeRef$current = activeRef.current) == null || _activeRef$current.focus();\n  }, [activeIndex]);\n\n  // set initial focus\n  useEffect(function () {\n    // need to wait for Drop to be ready\n    var timer = setTimeout(function () {\n      var optionsNode = optionsRef.current;\n      var clearButton = clearRef.current;\n      if (onSearch) {\n        var searchInput = searchRef.current;\n        if (searchInput && searchInput.focus && !activeRef.current) {\n          setFocusWithoutScroll(searchInput);\n        }\n      } else if (clear && clearButton && clearButton.focus && clear.position !== 'bottom') {\n        setFocusWithoutScroll(clearButton);\n      } else if (usingKeyboard && activeRef.current) {\n        setFocusWithoutScroll(activeRef.current);\n      } else if (optionsNode) {\n        setFocusWithoutScroll(optionsNode);\n      }\n    }, 100);\n    return function () {\n      return clearTimeout(timer);\n    };\n  }, [onSearch, usingKeyboard, clear]);\n  var isSelected = useCallback(function (index) {\n    var result;\n    if (selected) {\n      // deprecated in favor of value\n      result = selected.indexOf(index) !== -1;\n    } else {\n      var optionVal = getOptionValue(index, options, valueKey);\n      if (Array.isArray(value)) {\n        if (value.length === 0) {\n          result = false;\n        } else if (typeof value[0] !== 'object') {\n          result = value.indexOf(optionVal) !== -1;\n        } else if (valueKey) {\n          result = value.some(function (valueItem) {\n            var valueValue = typeof valueKey === 'function' ? valueKey(valueItem) : valueItem[valueKey] || valueItem[valueKey.key];\n            return valueValue === optionVal;\n          });\n        }\n      } else if (valueKey && value !== null && typeof value === 'object') {\n        var valueValue = typeof valueKey === 'function' ? valueKey(value) : value[valueKey];\n        result = valueValue === optionVal;\n      } else {\n        result = value === optionVal;\n      }\n    }\n    return result;\n  }, [selected, value, valueKey, options]);\n  var selectOption = useCallback(function (index) {\n    return function (event) {\n      if (onChange) {\n        var nextValue;\n        var nextSelected;\n        if (multiple) {\n          var nextOptionIndexesInValue = optionIndexesInValue.slice(0);\n          var allOptionsIndex = allOptions.indexOf(options[index]);\n          var valueIndex = optionIndexesInValue.indexOf(allOptionsIndex);\n          if (valueIndex === -1) {\n            nextOptionIndexesInValue.push(allOptionsIndex);\n          } else {\n            nextOptionIndexesInValue.splice(valueIndex, 1);\n          }\n          nextValue = nextOptionIndexesInValue.map(function (i) {\n            return valueKey && valueKey.reduce ? applyKey(allOptions[i], valueKey) : allOptions[i];\n          });\n          nextSelected = nextOptionIndexesInValue;\n        } else {\n          nextValue = valueKey && valueKey.reduce ? applyKey(options[index], valueKey) : options[index];\n          nextSelected = index;\n        }\n        onChange(event, {\n          option: options[index],\n          value: nextValue,\n          selected: nextSelected\n        });\n      }\n    };\n  }, [multiple, onChange, optionIndexesInValue, options, allOptions, valueKey]);\n  var onClear = useCallback(function (event) {\n    onChange(event, {\n      option: undefined,\n      value: '',\n      selected: ''\n    });\n  }, [onChange]);\n  var onNextOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex + 1;\n    while (nextActiveIndex < options.length && isDisabled(nextActiveIndex)) {\n      nextActiveIndex += 1;\n    }\n    if (nextActiveIndex !== options.length) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, options, isDisabled]);\n  var onPreviousOption = useCallback(function (event) {\n    event.preventDefault();\n    var nextActiveIndex = activeIndex - 1;\n    if (nextActiveIndex === -1) {\n      var searchInput = searchRef.current;\n      var clearButton = clearRef.current;\n      if (clearButton && clearButton.focus && shouldShowClearButton('top')) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(clearButton);\n      } else if (searchInput && searchInput.focus) {\n        setActiveIndex(nextActiveIndex);\n        setFocusWithoutScroll(searchInput);\n      }\n    }\n    while (nextActiveIndex >= 0 && isDisabled(nextActiveIndex)) {\n      nextActiveIndex -= 1;\n    }\n    if (nextActiveIndex >= 0) {\n      setActiveIndex(nextActiveIndex);\n      setKeyboardNavigation(true);\n    }\n  }, [activeIndex, isDisabled, shouldShowClearButton]);\n  var onKeyDownOption = useCallback(function (event) {\n    if (!onSearch) {\n      var nextActiveIndex = options.findIndex(function (e, index) {\n        var label;\n        if (typeof e === 'object') {\n          label = e.label || applyKey(e, labelKey);\n        } else {\n          label = e;\n        }\n        return typeof label === 'string' && label.charAt(0).toLowerCase() === event.key.toLowerCase() && !isDisabled(index);\n      });\n      if (nextActiveIndex >= 0) {\n        event.preventDefault();\n        setActiveIndex(nextActiveIndex);\n        setKeyboardNavigation(true);\n      }\n    }\n    if (onKeyDown) {\n      onKeyDown(event);\n    }\n  }, [isDisabled, labelKey, onKeyDown, options, onSearch]);\n  var onActiveOption = useCallback(function (index) {\n    return function () {\n      if (!keyboardNavigation) setActiveIndex(index);\n    };\n  }, [keyboardNavigation]);\n  var onSelectOption = useCallback(function (event) {\n    if ((shouldShowClearButton('bottom') || shouldShowClearButton('top')) && containsFocus(clearRef.current)) {\n      onChange(event, {\n        option: undefined,\n        value: '',\n        selected: ''\n      });\n    } else if (activeIndex >= 0 && activeIndex < options.length) {\n      event.preventDefault(); // prevent submitting forms\n      selectOption(activeIndex)(event);\n    }\n  }, [activeIndex, selectOption, options, onChange, shouldShowClearButton]);\n  var customSearchInput = theme.select.searchInput;\n  var SelectTextInput = customSearchInput || TextInput;\n  var selectOptionsStyle = theme.select.options ? _extends({}, theme.select.options.box, theme.select.options.container) : {};\n  return /*#__PURE__*/React.createElement(Keyboard, {\n    onEnter: onSelectOption,\n    onSpace: onSelectOption,\n    onUp: onPreviousOption,\n    onDown: onNextOption,\n    onKeyDown: onKeyDownOption\n  }, /*#__PURE__*/React.createElement(StyledContainer, {\n    ref: ref,\n    id: id ? id + \"__select-drop\" : undefined,\n    dropHeight: dropHeight\n  }, onSearch && /*#__PURE__*/React.createElement(Box, {\n    pad: !customSearchInput ? 'xsmall' : undefined,\n    flex: false\n  }, /*#__PURE__*/React.createElement(SelectTextInput, {\n    focusIndicator: !customSearchInput,\n    size: \"small\",\n    ref: searchRef,\n    type: \"search\",\n    value: search || '',\n    placeholder: searchPlaceholder,\n    onChange: function onChange(event) {\n      var nextSearch = event.target.value;\n      setSearch(nextSearch);\n      setActiveIndex(-1);\n      onSearch(nextSearch);\n    }\n  })), shouldShowClearButton('top') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  }), options.length > 0 ? /*#__PURE__*/React.createElement(OptionsContainer, {\n    role: \"listbox\",\n    tabIndex: \"-1\",\n    ref: optionsRef,\n    \"aria-multiselectable\": multiple,\n    onMouseMove: function onMouseMove() {\n      return setKeyboardNavigation(false);\n    }\n  }, /*#__PURE__*/React.createElement(InfiniteScroll, {\n    items: options,\n    step: theme.select.step,\n    onMore: onMore,\n    replace: replace,\n    show: activeIndex !== -1 ? activeIndex : undefined\n  }, function (option, index, optionRef) {\n    var optionDisabled = isDisabled(index);\n    var optionSelected = isSelected(index);\n    var optionActive = activeIndex === index;\n    // Determine whether the label is done as a child or\n    // as an option Button kind property.\n    var child;\n    var textComponent = false;\n    if (children) {\n      child = children(option, index, options, {\n        active: optionActive,\n        disabled: optionDisabled,\n        selected: optionSelected\n      });\n      if (typeof child === 'string' || child.props && child.props.children && typeof child.props.children === 'string') textComponent = true;\n    } else if (theme.select.options) {\n      child = /*#__PURE__*/React.createElement(Box, selectOptionsStyle, /*#__PURE__*/React.createElement(Text, theme.select.options.text, getOptionLabel(index, options, labelKey)));\n      textComponent = true;\n    }\n\n    // if we have a child, turn on plain, and hoverIndicator\n    return /*#__PURE__*/React.createElement(SelectOption\n    // eslint-disable-next-line react/no-array-index-key\n    , {\n      key: index\n      // merge optionRef and activeRef\n      ,\n      ref: function ref(node) {\n        // eslint-disable-next-line no-param-reassign\n        if (optionRef) optionRef.current = node;\n        if (optionActive) activeRef.current = node;\n      },\n      tabIndex: optionSelected ? '0' : '-1',\n      role: \"option\",\n      \"aria-setsize\": options.length,\n      \"aria-posinset\": index + 1,\n      \"aria-selected\": optionSelected,\n      focusIndicator: false,\n      \"aria-disabled\": optionDisabled || undefined,\n      plain: !child ? undefined : true,\n      align: \"start\",\n      kind: !child ? 'option' : undefined,\n      label: !child ? getOptionLabel(index, options, labelKey || valueKey) : undefined,\n      disabled: optionDisabled || undefined,\n      active: optionActive,\n      selected: optionSelected\n      // allow keyboard navigation to start from\n      // selected option after tabbing to it\n      ,\n      onFocus: function onFocus() {\n        return setActiveIndex(index);\n      },\n      onMouseOver: !optionDisabled ? onActiveOption(index) : undefined,\n      onClick: !optionDisabled ? selectOption(index) : undefined,\n      textComponent: textComponent\n    }, child);\n  })) : /*#__PURE__*/React.createElement(EmptySearchOption, {\n    emptySearchMessage: emptySearchMessage,\n    selectOptionsStyle: selectOptionsStyle,\n    theme: theme\n  }), shouldShowClearButton('bottom') && /*#__PURE__*/React.createElement(ClearButton, {\n    ref: clearRef,\n    clear: clear,\n    name: name,\n    onClear: onClear,\n    onFocus: function onFocus() {\n      return setActiveIndex(-1);\n    },\n    onMouseOver: function onMouseOver() {\n      return setActiveIndex(-1);\n    },\n    theme: theme\n  })));\n});\nexport { SelectContainer };"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}